<template>
  <nav class="navbar">
    <div class="restrainer">
      <div class="brand align-center">
        <svg
          class="NuxtLogo"
          width="245"
          height="180"
          viewBox="0 0 452 342"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g fill="none" fill-rule="evenodd">
            <path
              d="M139 330l-1-2c-2-4-2-8-1-13H29L189 31l67 121 22-16-67-121c-1-2-9-14-22-14-6 0-15 2-22 15L5 303c-1 3-8 16-2 27 4 6 10 12 24 12h136c-14 0-21-6-24-12z"
              fill="#00C58E"
            />
            <path
              d="M447 304L317 70c-2-2-9-15-22-15-6 0-15 3-22 15l-17 28v54l39-67 129 230h-49a23 23 0 0 1-2 14l-1 1c-6 11-21 12-23 12h76c3 0 17-1 24-12 3-5 5-14-2-26z"
              fill="#108775"
            />
            <path
              d="M376 330v-1l1-2c1-4 2-8 1-12l-4-12-102-178-15-27h-1l-15 27-102 178-4 12a24 24 0 0 0 2 15c4 6 10 12 24 12h190c3 0 18-1 25-12zM256 152l93 163H163l93-163z"
              fill="#2F495E"
              fill-rule="nonzero"
            />
          </g>
        </svg>
        <span>NUXT</span>
      </div>
      <div class="warpper align-center">
        <div class="top-menu align-center">
          <div class="menu-item">
            <svg
              t="1586781986610"
              class="icon"
              viewBox="0 0 1088 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="4047"
              width="200"
              height="200"
            >
              <path
                d="M32.901408 510.647887a32.901408 32.901408 0 0 1-22.535211-56.788732l450.704226-419.605634a127.098592 127.098592 0 0 1 169.915492 0L1078.084507 450.704225a32.901408 32.901408 0 0 1-45.070422 47.774648L585.915493 82.028169a61.295775 61.295775 0 0 0-83.830986 0l-450.704225 419.605634a32.450704 32.450704 0 0 1-18.478874 9.014084z"
                fill="#939393"
                p-id="4048"
              />
              <path
                d="M796.394366 1024h-157.295774v-318.647887a94.197183 94.197183 0 1 0-188.845071 0v318.647887H293.408451a126.647887 126.647887 0 0 1-126.647888-126.197183v-434.478873a32.901408 32.901408 0 0 1 65.802817 0v434.028169a60.84507 60.84507 0 0 0 60.845071 60.84507h90.140845v-252.84507a160 160 0 0 1 320 0v252.84507h90.140845A60.84507 60.84507 0 0 0 856.338028 897.802817v-434.478873a32.901408 32.901408 0 0 1 65.802817 0v434.028169a126.647887 126.647887 0 0 1-125.746479 126.647887z"
                fill="#939393"
                p-id="4049"
              />
            </svg>
            <nuxt-link to="/">首页</nuxt-link>
          </div>
          <div class="menu-item">
            <svg
              t="1586781861453"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="3116"
              width="200"
              height="200"
            >
              <path
                d="M994.141988 949.585564c-27.627331-27.622514-143.098941-143.105564-220.155876-220.155875 68.219103-76.725794 109.661002-177.787386 109.661003-288.530916 0-239.918927-194.488895-434.402404-434.401802-434.402404-239.914111 0-434.403608 194.483477-434.403608 434.402404 0 239.907488 194.489497 434.402404 434.403608 434.402404 65.279782 0 127.180127-14.421458 182.735223-40.215477 16.304743-40.491828-16.0019-59.45352-30.931508-65.811412-46.16998 21.347708-97.591242 33.283808-151.809736 33.283808-199.918391 0-362.003107-161.978751-362.003106-361.820679 0-199.835907 162.084114-361.819474 362.003106-361.819474 199.92983 0 362.007923 161.982966 362.007924 361.819474 0 105.734883-45.38006 200.863646-117.72517 267.011617-17.785843 30.759315-3.298157 47.186279 24.462834 74.466214 0.033114-0.027695 0.071647-0.055391 0.104761-0.082484l9.577177 9.576576c3.479983 3.424592 7.103861 7.026194 10.843338 10.848756h0.006021c71.505218 71.510637 174.239369 174.240573 201.327242 201.332059 42.700232 42.69662 96.680305-11.924059 54.298569-54.304591z m0 0"
                p-id="3117"
                fill="#939393"
              />
            </svg>
            <nuxt-link to="/search">搜索</nuxt-link>
          </div>
          <div class="menu-item">
            <svg
              t="1586782010189"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="5042"
              width="200"
              height="200"
            >
              <path
                d="M512 972.8C258.048 972.8 51.2 765.952 51.2 512S258.048 51.2 512 51.2s460.8 206.848 460.8 460.8c0 17.408-13.312 30.72-30.72 30.72s-30.72-13.312-30.72-30.72c0-220.16-179.2-399.36-399.36-399.36S112.64 291.84 112.64 512s179.2 399.36 399.36 399.36c17.408 0 30.72 13.312 30.72 30.72s-13.312 30.72-30.72 30.72z"
                p-id="5043"
                fill="#939393"
              />
              <path
                d="M512 972.8C258.048 972.8 51.2 765.952 51.2 512S258.048 51.2 512 51.2s460.8 206.848 460.8 460.8c0 83.968-22.528 164.864-65.536 236.544-9.216 14.336-27.648 19.456-41.984 10.24-14.336-9.216-19.456-27.648-10.24-41.984 36.864-61.44 56.32-133.12 56.32-204.8 0-220.16-179.2-399.36-399.36-399.36S112.64 291.84 112.64 512s179.2 399.36 399.36 399.36c91.136 0 177.152-29.696 247.808-87.04 6.144-5.12 13.312-11.264 19.456-16.384 5.12-4.096 9.216-9.216 14.336-13.312 12.288-12.288 31.744-12.288 43.008 0 12.288 12.288 12.288 31.744 0 43.008-5.12 5.12-10.24 10.24-16.384 15.36-7.168 6.144-14.336 13.312-22.528 19.456C716.8 937.984 617.472 972.8 512 972.8z"
                p-id="5044"
                fill="#939393"
              />
              <path
                d="M752.64 352.256c-9.216 0-18.432-4.096-24.576-11.264-41.984-53.248-102.4-89.088-169.984-101.376-16.384-3.072-27.648-18.432-24.576-35.84 3.072-16.384 18.432-27.648 35.84-24.576 81.92 14.336 155.648 57.344 206.848 122.88 10.24 13.312 8.192 32.768-5.12 43.008-5.12 5.12-11.264 7.168-18.432 7.168zM381.952 795.648c-23.552 0-47.104-6.144-68.608-18.432-31.744-18.432-55.296-48.128-64.512-83.968-9.216-35.84-5.12-72.704 13.312-104.448 18.432-31.744 48.128-55.296 83.968-64.512l73.728-19.456c35.84-9.216 72.704-5.12 104.448 13.312 31.744 18.432 55.296 48.128 64.512 83.968 9.216 35.84 5.12 72.704-13.312 104.448-18.432 31.744-48.128 55.296-83.968 64.512l-73.728 19.456c-11.264 3.072-23.552 5.12-35.84 5.12z m73.728-234.496c-7.168 0-13.312 1.024-19.456 3.072L362.496 583.68c-19.456 5.12-35.84 18.432-46.08 35.84s-13.312 38.912-7.168 58.368c5.12 19.456 18.432 35.84 35.84 46.08s38.912 13.312 58.368 7.168l73.728-19.456C495.616 706.56 512 693.248 522.24 675.84c10.24-17.408 13.312-38.912 7.168-58.368-5.12-19.456-18.432-35.84-35.84-46.08-11.264-7.168-24.576-10.24-37.888-10.24z"
                p-id="5045"
                fill="#939393"
              />
              <path
                d="M563.2 665.6c-17.408 0-30.72-13.312-30.72-30.72V215.04c0-17.408 13.312-30.72 30.72-30.72s30.72 13.312 30.72 30.72v419.84c0 17.408-13.312 30.72-30.72 30.72z"
                p-id="5046"
                fill="#939393"
              />
            </svg>
            <nuxt-link to="/mymusic">我的音乐</nuxt-link>
          </div>
        </div>
        <div class="menu-item" v-if="this.$store.state.isLogin === false">
          <nuxt-link to="/login">登录</nuxt-link>
          <nuxt-link to="/register">注册</nuxt-link>
        </div>
        <div
          class="user align-center"
          v-if="this.$store.state.isLogin === true"
        >
          <div class="avatar">
            <img :src="this.$store.state.pic" />
          </div>
          <el-dropdown trigger="click">
            <div class="username" style="cursor:pointer">
              <h4>{{ this.$store.state.userName }}</h4>
            </div>
            <el-dropdown-menu slot="dropdown">
              <el-dropdown-item>
                <nuxt-link :to="`/user/${this.$store.state.userName}`"
                  >我的主页</nuxt-link
                >
              </el-dropdown-item>
              <el-dropdown-item>
                <nuxt-link to="/settings">我的设置</nuxt-link>
              </el-dropdown-item>
              <el-dropdown-item>
                <div @click="logout">登出</div>
              </el-dropdown-item>
            </el-dropdown-menu>
          </el-dropdown>
        </div>
      </div>
    </div>
  </nav>
</template>
<script>
// import mapMutations from "vuex";
export default {
  methods: {
    logout() {
      localStorage.removeItem("user");
      localStorage.removeItem("userPic");
      localStorage.removeItem("userName");
      this.$store.commit("reset");
      this.$message({ message: "登出成功", type: "success" });
      this.$router.push("/");
    }
  }
};
</script>
<style lang="scss" scoped>
.navbar {
  width: 100vw;
  height: 60px;
  z-index: 999;
  background: #141414;
  position: sticky;
  top: 0;
  a {
    color: #939393;
    font-size: 1rem;
    transition: 0.3s color ease;
    &:hover {
      color: #fff;
    }
  }
  .restrainer {
    height: 100%;
    min-height: 0;
    padding: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .brand {
    svg {
      width: 30px;
      height: 30px;
      margin-right: 20px;
    }
    span {
      color: #1db954;
      font-size: 20px;
      font-weight: bold;
    }
  }
  .top-menu {
    padding: 0 40px;
    svg {
      width: 23px;
      height: 23px;
      margin-right: 5px;
    }

    .menu-item {
      display: flex;
      align-items: center;
    }
    .menu-item:not(:last-child) {
      margin-right: 40px;
    }
  }
  .user {
    .avatar {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      img {
        width: 100%;
        height: 100%;
        border: #fff 2px solid;
        border-radius: 50%;
        object-fit: cover;
      }
    }
    .username > h4 {
      transition: color linear 0.2s;
      &:hover {
        color: #1db954;
      }
    }
  }
}
</style>
